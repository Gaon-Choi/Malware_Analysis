import os
import numpy
import array
import imageio
from PIL import Image

number_of_samples = 500

def is_png(input_file):
    ext = os.path.splitext(os.path.basename(input_file))[1]
    print('ext = ', ext)
    result = False
    if '.png' == ext:
        result = True
    return result


def resize_and_save_img(input_dir, output_dir, filename):

    #결과파일 이름
    out_file = os.path.splitext(os.path.basename(filename))[0] + '_resized.png'

    #결과파일 저장 path
    out_file_full = output_dir + out_file

    #resize 전 파일들 경로
    input_file_path = os.path.join(input_dir, filename)


    print("out_file_full: ", out_file_full)

    #png 파일일 경우,
    if is_png(filename):
        f = Image.open(input_file_path)
        width, height = f.size
        height = int(height / 10)
        resized_img = f.resize((32, 32))
        resized_img.save(out_file_full)

    else:
        print("not .txt")

def convert_img_to_resized_img(input_dir, output_dir):
    if not os.path.isdir(input_dir):
        print(input_dir, 'Input directory not found. Exiting.')
        exit(0)
    if not os.path.isdir(output_dir):
        os.mkdir(output_dir)
    count = 0
    files = os.listdir(input_dir)
    print(files)
    for filename in files:
        print("filename: ", filename)

        resize_and_save_img(input_dir, output_dir, filename)
        print(filename)
        count += 1
        print(count)
        if number_of_samples == count:
            exit(0)


convert_img_to_resized_img("../Data/benign_500_img", "../Data/benign_500_resized_img/")